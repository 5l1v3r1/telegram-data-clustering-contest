<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8"/>
    <meta property="og:url" content="https://www.heise.de/security/meldung/Y2K-Bug-Variante-trifft-Splunk-Produkte-Loesungen-verfuegbar-4599420.html"/>
    <meta property="og:site_name" content="Security"/>
    <meta property="article:published_time" content="2019-11-29T15:31:00+00:00"/>
    <meta property="og:title" content="Y2K-Bug-Variante trifft Splunk-Produkte – Lösungen verfügbar"/>
    <meta property="og:description" content="Splunk-Admins sollten sich vor dem Jahreswechsel dringend mit einem &quot;Jahr-2020-Problem&quot; in der Software auseinandersetzen. Updates stehen bereit."/>
  </head>
  <body>
    <article>
      <h1>Y2K-Bug-Variante trifft Splunk-Produkte – Lösungen verfügbar</h1>
      <h2>Splunk-Admins sollten sich vor dem Jahreswechsel dringend mit einem "Jahr-2020-Problem" in der Software auseinandersetzen. Updates stehen bereit.</h2>
      <address><time datetime="2019-11-29T15:31:00+00:00">29 Nov 2019, 15:31</time> by <a rel="author">Olivia von Westernhagen</a></address>
      <p>Instanzen der Plattform Splunk droht zum 1. Januar 2020 eine Art verspätetes Y2K-Problem: Sie können Zeitstempel, in denen eine zweistellige Jahresangabe vorkommt, nicht mehr korrekt erkennen, so dass es zum Hinzufügen falscher Stempel kommen kann. Des Weiteren werden ab dem 13. September 2020 um 12:26:39 PM (UTC) Unix-Zeitstempel aufgrund fehlerhaften Parsens grundsätzlich nicht mehr erkannt.</p>
      <p>Auf dieses kritische Problem weist ein <a href="https://docs.splunk.com/Documentation/Splunk/8.0.0/ReleaseNotes/FixDatetimexml2020">Beitrag auf der Website des Log-, Monitoring- und Reporting-Werkzeugs Splunk</a> hin. Ihm ist auch zu entnehmen, dass es einen Fix gibt, der den Problemen vorbeugt. Splunk-Cloud-Kunden erhalten ihn automatisch. Admins der anderen im Beitrag genannten Plattformen sollten dringend daran denken, die Aktualisierung rechtzeitig vorzunehmen – vor allem auch deshalb, weil eine bereits erfolgte fehlerhafte Zeitstempel-Vergabe laut Splunk im Nachhinein nicht korrigierbar ist.</p>
      <p>Ursache des Problems sind reguläre Ausdrücke in der Datei <i>datetime.xml</i>, die Splunks Eingabeprozessor bei der Zeitstempel-Bestimmung hilft. Die betreffenden regulären Ausdrücke extrahieren aus Jahreszahlen die letzten zwei Stellen, wurden aber offenbar so gewählt, dass dies nur bis zum 31.12.2019 korrekt funktioniert.</p>
      <h3>Betroffene Plattformen und Versionen</h3>
      <p>Der Bug steckt laut Sicherheitshinweis in den folgenden Arten von Splunk-Instanzen:</p>
      <ul>
        <li><b>Splunk Cloud </b>(automatischer Fix; Splunk-Support informiert über den Zeitpunkt)</li>
        <li>
          <b>Splunk Light</b>
        </li>
        <li>
          <p><b>Splunk Enterprise</b>:</p>
          <p>   •  Indexers (egal ob geclustert oder nicht)<br/>   •  Heavy forwarders<br/>   •  Search heads (egal ob geclustert oder nicht)<br/>   •  Search head deployers<br/>   •  Deployment servers<br/>   •  Cluster masters<br/>   •  License masters</p>
        </li>
      </ul>
      <p>Je nach Konfiguration können auch Universal forwarders betroffen sein; Details dazu sind dem Abschnitt "Impact" des Hinweises<a href="https://docs.splunk.com/Documentation/Splunk/8.0.0/ReleaseNotes/FixDatetimexml2020"> auf der Splunk-Site</a> zu entnehmen.</p>
      <figure>
        <img src="https://www.heise.de/imgs/18/2/7/9/7/7/4/5/Screenshot__372_-420097f67d41d99e.png"/>
        <figcaption>Das Splunk-Team hat die abgesicherten Versionen in einer Tabelle zusammengefasst.<cite>(Bild: docs.splunk.com)</cite></figcaption>
      </figure>
      <h3>Vier Lösungswege verfügbar</h3>
      <p>Die Splunk-Entwickler nennen die folgenden möglichen Vorgehensweisen, um das Problem in den Griff zu bekommen:</p>
      <ul>
        <li>Den <a href="https://drive.google.com/file/d/17WR7mBqyhDLEOwQAipfp-MW8aYWVT5wZ/view?usp=sharing">Download einer von Splunk bereitgestellten App</a>, die die kaputte <i>datetime.xml </i>vorübergehend durch eine korrigierte Version ersetzt. Zum Deployment muss zwar nicht die komplette Plattform gestoppt werden, allerdings ist ein Neustart der einzelnen Instanzen notwendig. Hierbei handelt es sich ausdrücklich nur um eine <b>temporäre</b> Lösung für umfangreiche Infrastrukturen.</li>
        <li>Den <a href="https://download.splunk.com/products/ingest2020/datetime.zip">Download einer aktualisierten datetime.xml</a> sowie das anschließende Ersetzen der Dateien auf allen Instanzen.</li>
        <li>Ein Upgrade aller Instanzen auf die vom Splunk-Team veröffentlichten neuen Versionen samt gefixter <i>datetime.xml.</i></li>
        <li>Das manuelle Modifizieren der XML-Datei<i>e</i>n aller Instanzen (siehe Anleitung im Sicherheitshinweis).</li>
      </ul>
      <p>In allen vier Fällen ist es ratsam, den jeweiligen Abschnitt im Sicherheitshinweis sorgfältig zu lesen und den dortigen Anweisungen zu folgen.</p>
      <p><b>Update 29.11.19, 18:03: </b>Bug-Beschreibung überarbeitet. (<a href="mailto:ovw@heise.de">ovw</a>)</p>
    </article>
  </body>
</html>