<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8"/>
    <meta property="og:url" content="https://www.zdnet.com/article/google-chrome-experiment-crashes-browser-tabs-impacts-companies-worldwide/"/>
    <meta property="og:site_name" content="ZDNet"/>
    <meta property="article:published_time" content="2019-11-15T04:44:37+00:00"/>
    <meta property="og:title" content="Google Chrome experiment crashes browser tabs, impacts companies worldwide"/>
    <meta property="og:description" content="In what looks to be the Chrome team's biggest misstep, companies report massive outages caused by unannounced Chrome experiment."/>
  </head>
  <body>
    <article>
      <h1>Google Chrome experiment crashes browser tabs, impacts companies worldwide</h1>
      <address><time datetime="2019-11-15T04:44:37+00:00">15 Nov 2019, 04:44</time> by <a rel="author" href="https://www.zdnet.com/meet-the-team/us/catalin.cimpanu/" target="_blank">Catalin Cimpanu</a></address>
      <p>
        <b>In what looks to be the Chrome team's biggest misstep, companies report massive outages caused by unannounced Chrome experiment.</b>
      </p>
      <figure>
        <img src="https://zdnet3.cbsistatic.com/hub/i/2019/11/15/df3ac402-804e-49fe-91fa-52dc1f05655c/721ef07532182c2b992a1e11d9c95243/chrome-logo.png"/>
      </figure>
      <p>A Google Chrome experiment has gone horribly wrong this week and ended up crashing browsers on thousands, if not more, enterprise networks for nearly two days.<br/><br/>The issue first appeared on Wednesday, November 13. It didn't impact all Chrome users, but only Chrome browsers running on Windows Server "<a href="https://searchvirtualdesktop.techtarget.com/definition/terminal-server">terminal server</a>" setups -- a very common setup in enterprise networks</p>
      <h3>Complaints flooded Google</h3>
      <p>According to hundreds of reports, users said that Chrome tabs were going blank, all of a sudden, in what's called a "White Screen of Death" (WSOD) error.<br/><br/>The issue was no joke. System administrators at many companies reported that hundreds and thousands of employees couldn't use Chrome to access the internet, as the active browser tab kept going blank while working.<br/><br/>In tightly controlled enterprise environments, many employees didn't have the option to change browsers and were left unable to do their jobs. Similarly, system administrators couldn't just replace Chrome with another browser right away.</p>
      <p>"This has had a huge impact for all our Call Center agents and not being able to chat with our members," someone with a Costco email address said in a bug report. "We spent the last day and a half trying to figure this out."<br/><br/>"Our organization with multiple large retail brands had 1000 call center agents and many IT people affected for 2 days. This had a very large financial impact," said another user.</p>
      <p>"Like many others, this has had significant impact on our organization with our entire Operations (over 500 employees) working in a RDS environment with Google Chrome as the primary browser," said another system administrator.<br/><br/>"4000 impacted in my environment. Working on trying to fix it for 12 hours," said another.<br/><br/>"Medium sized call center for a local medical office lost a day and a half of work for 40-60 employees," added another.<br/><br/>"Same issue experienced, hundreds of users impacted - hours spent attempting to isolate the cause," said another user.<br/><br/>Hundreds of complaints poured in via <a href="https://support.google.com/chrome/thread/19713332?hl=en">Google's support forum</a>, <a href="https://bugs.chromium.org/p/chromium/issues/detail?id=1024837">Chrome bug tracker</a>, and Reddit [<a href="https://old.reddit.com/r/chrome/comments/dw1wgb/chrome_78_having_intermittent_tab_hangs_crashes/">1</a>, <a href="https://old.reddit.com/r/chrome/comments/dwjg0b/getting_a_bit_miffed_with_chrome_at_the_moment/">2</a>]. One impacted sysadmin told <i>ZDNet</i> that they initially mistook the Chrome blank tabs as a sign of malware and reacted accordingly, starting network-wide security audits.</p>
      <h3>Google ships a fix</h3>
      <p>However, with time, the root cause of the bug was eventually found, and traced back to a feature called "WebContents Occlusion."<br/><br/>According to <a href="https://docs.google.com/document/d/1tPuJE0Vws7oskjjqrawNfMkwFtGxyHV33yQagiplVfY/edit#">Google Chrome design document</a>, this is an experimental feature that suspends Chrome tabs when users move other app windows on top of Chrome, treating the active Chrome tab as a background tab.</p>
      <figure>
        <img src="https://zdnet4.cbsistatic.com/hub/i/r/2019/11/15/6c19c7b4-2816-4dc8-950e-3617fd289308/resize/370xauto/0f0fc6655943b057830f9b6d3fb25de8/image2.png"/>
        <figcaption>Image: Google</figcaption>
      </figure>
      <p>The feature, meant to improve Chrome's resource usage when not in active use, had been under testing in Chrome Canary and Chrome Beta releases all year.<br/><br/>However, this week, Google decided to test it in the main Stable release, so it could get more feedback on how it behaved.<br/><br/>That it behaved badly is an understatement.<br/><br/>"The experiment/flag has been on in beta for ~5 months," said David Bienvenu, a Google Chrome engineer. "It was turned on for stable (e.g., M77, M78) via an experiment that was pushed to released Chrome Tuesday morning."<br/><br/>"Prior to that, it had been on for about 1% of M77 and M78 users for a month with no reports of issues, unfortunately," he added.<br/><br/>However, when rolled out to a broader audience -- such as Windows users on terminal server setups -- an unexpected bug occurred that instead of suspending Chrome tabs when users switched to another app, it unloaded the tab entirely, leaving a blank page behind.<br/><br/>Users could refresh the Chrome tab to access their sites again, but in some cases, this also meant they lost previous work.<br/><br/>The Chrome team said they pushed a new Chrome configuration file to all Chrome users and disabled the experiment.<br/><br/>Chrome engineers operate a system called Finch that lets them push updated Chrome settings to active installs, such as enabling or disabling experimental flags.<br/><br/>If the fix has not reached all impacted users, and they still have problems, they can disable the following two experimental flags by hand:<br/><br/><b>chrome://flags/#web-contents-occlusion</b><br/><b>chrome://flags/#calculate-native-win-occlusion</b></p>
      <figure>
        <img src="https://zdnet1.cbsistatic.com/hub/i/2019/11/15/1ee846bf-3cbf-4db9-bb9c-c3641e7fbb5f/969e85509d93d45736d3c1d54668f8cc/chrome-occlusion.png"/>
      </figure>
      <p>An alternative method to fixing this is to start Google Chrome with the following <a href="https://www.chromium.org/developers/how-tos/run-chromium-with-flags">command-line argument</a>: <b>--disable-backgrounding-occluded-windows</b></p>
      <h3>Fix prompts more criticism</h3>
      <p>However, fixing the problem actually made system administrators even angrier. Many didn't know that Chrome engineers could run experiments on their tightly-controlled Chrome installations, let alone that Google engineers could just ship changes to everyone's browsers without any prior approval.<br/><br/>"Do you see the impact you created for thousands of us without any warning or explanation? We are not your test subjects," said an angry sysadmin. "We are running professional services for multi million dollar programs. Do you understand how many hours of resources were wasted by your 'experiment'?"<br/><br/>"How many tens of thousands of dollars has this oops cost everyone? This is starting to look like a pretty massive mistake on Googles part," added another disgruntled sysadmin.<br/><br/>"We take great care in rolling our changes out in a very controlled manner to avoid this type of scenario and we spent the better part of yesterday trying to determine if an internal change had occurred in our environment without our knowledge. We did not realize this type of event could occur on Chrome unbeknownst to us. We are already discussing alternative options, none of them are great, but this is untenable," said another, hinting at a browser change across their organization.<br/><br/>Although it lasted just two days, this entire incident is panning out to be one of the Chrome team's biggest bungles. Many impacted users demanded an official apology from Google, and by the looks of the financial impact it may have caused some companies, they are entitled to it.</p>
    </article>
  </body>
</html>