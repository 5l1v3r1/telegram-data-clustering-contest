<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8"/>
    <meta property="og:url" content="http://easyelectronics.ru/malenkaya-xitrost.html"/>
    <meta property="og:site_name" content="easyelectronics.ru"/>
    <meta property="article:published_time" content="2019-11-12T02:15:18+00:00"/>
    <meta property="og:title" content="Маленькая хитрость"/>
    <meta property="og:description" content="Я думаю многие сталкивались с тем, что подключаешь программатор к девайсу, а он из системы пропадает. И надо его перетыкать. Особенно если речь идет о каком-нибудь ST-Link или USBASP/AVRISP за копейки с Алиэкспресса. Схемотехника там говеная, чего уж там. Все по минимуму."/>
  </head>
  <body>
    <article>
      <h1>Маленькая хитрость</h1>
      <address><time datetime="2019-11-12T02:15:18+00:00">12 Nov 2019, 02:15</time> by <a rel="author" href="http://easyelectronics.ru/author/di-halt" target="_blank">DI HALT</a></address>
      <p>Я думаю многие сталкивались с тем, что подключаешь программатор к девайсу, а он из системы пропадает. И надо его перетыкать. Особенно если речь идет о каком-нибудь <a href="https://alitems.com/g/1e8d1144946220d45a6916525dc3e8/?ulp=https%3A%2F%2Fru.aliexpress.com%2Fitem%2F32839270086.html&amp;subid=stlink">ST-Link</a> или USBASP/AVRISP за копейки с Алиэкспресса. Схемотехника там говеная, чего уж там. Все по минимуму.</p>
      <p>И если девайс начинает питаться от программатора, то при подключении конденсаторы вашего девайса просаживали напряжение так, что контроллер программатора вис или подглючивал. Тут либо подключаться к девайсу запитанному от своего источника питания, либо передергивать программатор. Что жутко бесит когда надо прошить партию устройств. Решение такое же простое как и причина:</p>
      <figure>
        <img src="http://easyelectronics.ru/img/starters/Hitrost/line.GIF"/>
      </figure>
      <p>Берем да вкорячиваем в разрез питания нашего кабеля конденсатор и дроссель. Кондер берем микрофарад так на 470, нехай подавится, скотина. А дроссель на максимальную индуктивность, какую не жалко и чтобы ток держал рабочий. Хотя бы миллиампер на 500. У меня это дроссель на 220мкГн и 1А. CW68-221K. Задача дросселя не дать броску тока заряда конденсатора при включении программатора в USB что-нибудь спалить. А при включении программатора в девайс этот же дроссель не позволит броску тока дать по рогам контроллеру программатора.</p>
      <figure>
        <img src="http://easyelectronics.ru/img/starters/Hitrost/Line2.GIF"/>
      </figure>
      <p>В идеале же еще добавить диод Шоттки в обратку дросселю, на случай если наша схема будет жрать из программатора большой ток (начиная от ампера и выше это уже становится ощутимым), чтобы катуха не накачивала конденсатор при отрыве программатора от девайса. Индуктивность же инерционная штука, ток через нее не может мгновенно начаться и мгновенно прекратиться. И при обрыве току течь будет некуда кроме как в уже заряженный конденсатор, поднимая в нем напряжение. Которое потом будет стравливаться через эту же катушку обратно в программатор. А так катушка замкнется сама на себя через диод Шоттки. Почему именно диод Шоттки? Да можно и простой, но у Шоттки самое низкое падение напряжения, раза в два ниже чем у обычного диода. Так что его эффективность тут будет выше.</p>
      <p>Ну и парочку супрессоров на напряжение линии уж тогда до кучи. Вначале и в конце. Можно прям к разъему припаять.</p>
      <p>Делов на пять минут, а польза неимоверная. Сделайте уже и не матюкайтесь :)</p>
      <p>Да, про <a href="https://alitems.com/g/1e8d1144946220d45a6916525dc3e8/?ulp=https%3A%2F%2Fru.aliexpress.com%2Fitem%2F32839270086.html&amp;subid=stlink">ST-Link</a>… Знаете какая самая частая причина выгорания этого свистка?</p>
      <figure>
        <img src="http://easyelectronics.ru/img/starters/Hitrost/stlink.png"/>
      </figure>
      <p>КЗ контактов разъема на корпус. Стяните эту алюминиевую байду и увидите сами, что контакты тупо лежат на алюминии, отделясь от него тончайшим слоем анодирования. Стоит чуть пошевелить, нажать, как анодирование царапается и дальше выходит волшебный дым. А еще там ноги кварца могут торчать и коротить за это же анодирование. Решение такое же тупое как и косяк. Открыть, оторвать все выступающие части, что не оторвать обмотать изолентой и закрыть.</p>
      <p>И еще один прикол с ним же. У него распиновка может отличаться от версии к версии. Причем даже в одной партии, купленной у одного и того же китайца. Это вообще веселое западло :) Я уже три разных версии распиновки видел. А разъем то тот же самый. Берешь и втыкаешь не глядя, а тут опа… Самая жопа когда оно вроде бы работает (на паразитном питании через порты, ага), но глючит адово и сидишь и не понимаешь, то ли ты олень, то ли лыжи не едут и вообще вчера все работало.</p>
    </article>
  </body>
</html>