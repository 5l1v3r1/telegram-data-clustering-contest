<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8"/>
    <meta property="og:url" content="https://www.zdnet.com/article/dns-over-https-will-eventually-roll-out-in-all-major-browsers-despite-isp-opposition/"/>
    <meta property="og:site_name" content="ZDNet"/>
    <meta property="article:published_time" content="2019-11-25T16:47:00+00:00"/>
    <meta property="og:title" content="Here's how to enable DoH in each browser, ISPs be damned"/>
    <meta property="og:description" content="DoH support is already present in all major browsers. Users just have to enable it and configure it."/>
  </head>
  <body>
    <article>
      <h1>Here's how to enable DoH in each browser, ISPs be damned</h1>
      <address><time datetime="2019-11-25T16:47:00+00:00">25 Nov 2019, 16:47</time> by <a rel="author" href="https://www.zdnet.com/meet-the-team/us/catalin.cimpanu/" target="_blank">Catalin Cimpanu</a></address>
      <p>
        <b>DoH support is already present in all major browsers. Users just have to enable it and configure it.</b>
      </p>
      <figure>
        <video src="https://techrepublicvideo.cbsistatic.com/vr/2019/11/21/1646257731673/2019-11-21-wochit-dns-over-https-will-eventually-roll-out-in-all-major-browsers-despite-isp-opposition_1981730_742.mp4"/>
      </figure>
      <figure>
        <img src="https://zdnet2.cbsistatic.com/hub/i/r/2019/11/21/33a55f46-63d2-401e-b58d-888c51b8a2a0/thumbnail/570x322/c874efa7469c44033f04c628fec52439/dnsoverhttps-will-eventually-roll-out-in-5dcc132c6e4a640001cfe8b1-1-nov-21-2019-15-26-34-poster.jpg"/>
      </figure>
      <p>All six major browser vendors have plans to support DNS-over-HTTPS (or DoH), a protocol that encrypts DNS traffic and helps improve a user's privacy on the web.<br/><br/>The DoH protocol has been one of the year's hot topics. It's a protocol that, when deployed inside a browser, it allows the browser to hide DNS requests and responses inside regular-looking HTTPS traffic.<br/><br/>Doing this makes a user's DNS traffic invisible to third-party network observers, such as ISPs. But while users love DoH and have deemed it a privacy boon, ISPs, networking operators, and cyber-security vendors <a href="https://www.zdnet.com/article/dns-over-https-causes-more-problems-than-it-solves-experts-say/">hate it</a>.<br/><br/><a href="https://www.cnet.com/tags/hacking/">CNET: Hacking Latest News</a><br/><br/>A UK ISP called Mozilla an "<a href="https://www.zdnet.com/article/uk-isp-group-names-mozilla-internet-villain-for-supporting-dns-over-https/">internet villain</a>" for its plans to roll out DoH, and a Comcast-backed lobby group has been caught <a href="https://www.vice.com/en_us/article/9kembz/comcast-lobbying-against-doh-dns-over-https-encryption-browsing-data">preparing a misleading document about DoH</a> that they were planning to present to US lawmakers in the hopes of preventing DoH's broader rollout.</p>
      <p>However, this may be a little too late. ZDNet has spent the week reaching out to major web browser providers to gauge their future plans regarding DoH, and all vendors plan to ship it, in one form or another.</p>
      <h3>How to enable DoH in each browser</h3>
      <p>Below are what we currently know about each browser vendor's plans regarding DoH, and how users could enable DoH in each respective browser.</p>
      <h4>Brave</h4>
      <p>"We absolutely want to implement it," Tom Lowenthal, Product Manager at Brave for Privacy &amp; Security told ZDNet yesterday.<br/><br/>However, the Brave team doesn't yet have an exact timeline for DoH's rollout. This is because Brave developers have been busy with other privacy-focused improvements.<br/><br/>For example, yesterday, the company released an update with <a href="https://brave.com/brave-fingerprinting-and-privacy-budgets/">improved detection of user fingerprinting scripts</a>. Further, the v1.0 stable release is on the horizon, so the Brave team needs to focus on that release first.<br/><br/>Nevertheless, DoH will come to Brave.<br/><br/>"Implementing DoH is far more than just the technical work, though. We need to decide on sensible and protective defaults for the vast majority of people who don't think about their DNS configuration while making sure that we don't break things for the people and organizations who have carefully tuned their setup," Lowenthal said.<br/><br/>Because Brave is built on top of the Chromium open-source browser codebase, DoH support is available. However, the Brave team has not configured the feature to its own liking. It is there in the codebase, but in the way the Google Chrome team designed it to work (see Chrome section below).<br/><br/>You can enable DoH in Brave by visiting the following URL:<br/><br/><b>brave://flags/#dns-over-https</b></p>
      <figure>
        <img src="https://zdnet4.cbsistatic.com/hub/i/2019/11/07/dc0c1250-6925-4d2c-b835-d277e03edf17/ff13f1a800e839cf97148b9bda76ae1e/doh-brave.png"/>
      </figure>
      <h4>Chrome</h4>
      <p>Google Chrome is the second browser after Firefox to have added DoH support. You can enable DoH in Chrome by going to:<br/><br/><b>chrome://flags/#dns-over-https</b></p>
      <figure>
        <img src="https://zdnet3.cbsistatic.com/hub/i/2019/11/08/f61cfaea-23e3-429b-9dca-f4a68e08e6e1/902cae1e2af2b0ab416cab0772701452/doh-chrome.png"/>
      </figure>
      <p>DoH isn't turned on by default for everyone. Google is currently running a limited experiment with a small number of users to see how DoH fares in a real-world test. Details <a href="https://blog.chromium.org/2019/09/experimenting-with-same-provider-dns.html">here</a>.<br/><br/>Unlike Firefox, which forces all DoH traffic to Cloudflare by default, Chrome's DoH support is different.<br/><br/>After DoH is enabled in Chrome, the browser will send DNS queries to the same DNS servers as before. If the target DNS server has a DoH-capable interface, then Chrome will encrypt DNS traffic and send it to the same DNS server's DoH interface.<br/><br/>This prevents Chrome from hijacking an operating system's DNS settings, a sensible approach in enterprise environments.<br/><br/>Currently, Chrome's DoH support works like this:<br/><br/>- a user types a website URL in the browser<br/>- Chrome looks at the operating system's DNS server<br/>- Chrome checks to see if this DNS server is on a whitelist of approved DoH-capable DNS servers<br/>- if yes, Chrome sends a DoH (encrytped) DNS query to that DNS server's DoH interface<br/>- if not, Chrome sends a regular DNS query to the same server<br/><br/>Because of the way Google implemented DoH support in Chrome, users risk of never being able to use DoH. This is because a user's operating system gets its DNS settings from a central network authority, which is usually the ISP. If the ISP doesn't want to use a DoH-friendly DNS setting, then you're never going to have DoH in Chrome.<br/><br/>The good news is that there are two ways of bypassing this and forcing Chrome to use DoH all the time, regardless of your ISP's DNS settings.<br/><br/>First, there's this tutorial to <a href="https://www.zdnet.com/article/how-to-enable-dns-over-https-doh-in-google-chrome/">forcibly-enable DoH in Chrome</a>. Second, a user can configure a custom DoH-friendly DNS server for their operating system. They can choose one from <a href="https://www.chromium.org/developers/dns-over-https">this list</a>, guaranteed to work in Chrome.</p>
      <h4>Edge</h4>
      <p>Next year, Microsoft plans to roll out a new version of its Edge browser, rebuilt on the Chromium codebase.<br/><br/>A Microsoft spokesperson told ZDNet the company is supportive of DoH, but they couldn't share their exact plans.<br/><br/>However, the Chromium-based version of Edge already supports DoH. Users can enable it by visiting:<br/><br/><b>edge://flags/#dns-over-https</b></p>
      <figure>
        <img src="https://zdnet2.cbsistatic.com/hub/i/2019/11/08/a723d483-3146-4cc2-af3c-877148a3d7f5/b10c4c3eedd8a275715ca8c970935465/doh-edge.png"/>
      </figure>
      <p>This will turn on DoH, but it won't work unless your computer is using a DoH-capable DNS server -- which in 99% of cases, they are not.<br/><br/>To forcibly enable DoH in Edge and work at all times, you can follow the <a href="https://textslashplain.com/2019/11/06/thoughts-on-dns-over-https/">steps laid out in this blog post</a> by one of the Edge team engineers.<br/><br/>You can replace the address of the Cloudflare DoH resolver with any other DoH server you want. You can choose one from <a href="https://github.com/curl/curl/wiki/DNS-over-HTTPS#publicly-available-servers">here</a>.<br/><br/>Once configured properly, Edge is capable of running over DoH -- see screenshot below.</p>
      <figure>
        <img src="https://zdnet4.cbsistatic.com/hub/i/2019/11/08/a6ce2d9e-0ce9-4464-b950-489a5d84fac1/c34bd41c8d106515cd011e091d2dde6a/doh-edge-check.png"/>
      </figure>
      <h4>Firefox</h4>
      <p>Mozilla was the organization that pioneered DoH's creation together with Cloudflare. Support for DoH is available in stable versions of Firefox already. You can enable it via the browser's Settings section, in the Networking section. See instructions here.</p>
      <figure>
        <img src="https://zdnet3.cbsistatic.com/hub/i/2019/07/07/8608af28-2a28-4ff1-952b-9b6d2deb1ea6/b1fc322caaa2c955b1a2fb285daf0e42/doh-settings-2.png"/>
        <figcaption>Image: ZDNet</figcaption>
      </figure>
      <p>The reason why everyone has and is criticizing Firefox's DoH implementation is that they're using Cloudflare as the default DoH server for everyone, effectively overwriting local DNS settings for everyone.<br/><br/>However, anyone can change this default setting to <a href="https://github.com/curl/curl/wiki/DNS-over-HTTPS#publicly-available-servers">any other DoH server they want</a>. Of all browsers, Firefox's DoH support is the strongest and easiest to configure, primarily because they've been working on it for longer than anyone else.<br/><br/>The organization is currently enabling DoH by default for all users in the US. DoH won't be enabled by default for UK users, following the UK government's pushback against the feature.<br/><br/>In the past, Mozilla was non-commital on its plans to enable DoH by default in other geographical areas outside the US. However, since DoH support is already present in the browser's stable release, all a user has to do is enable it, and it will work without any glitches.</p>
      <h4>Opera</h4>
      <p>Opera has already rolled out DoH support. The feature is turned off for all users but can be enabled at any time in the stable release, and it will work without users going through any additional steps.<br/><br/>This is because Opera devs are using a default DoH resolver, similar to Firefox, and are not leaving it to ISPs, like Chrome. All Opera DoH traffic is currently funneled to Cloudflare's 1.1.1.1 DoH resolver.<br/><br/>We couldn't find a way for users to change the DoH resolver to a custom server, but at least DoH is working in Opera.<br/><br/>It won't work, however, if you're using Opera's built-in VPN system. The VPN feature must be disabled for DoH to work.<br/><br/>To enable DoH in Opera, visit:<br/><br/><b>opera://flags/opera-doh</b></p>
      <figure>
        <img src="https://zdnet3.cbsistatic.com/hub/i/2019/11/08/c9ccfffa-c93a-4772-9426-c3f7c1d0aedd/05aadb67d4237dac932e1705a5552209/doh-opera.png"/>
      </figure>
      <h4>Safari</h4>
      <p>No reply. However, Safari devs are usually late to any feature-rollout party, and Apple has been recently investing in user privacy-focused features, so the chances are pretty high that DoH will come to Safari.</p>
      <h4>Vivaldi</h4>
      <p>A Vilvadi spokesperson said that its DoH support is closely tied to Chrome's implementation. Users can enable it by visiting:<br/><br/><b>vivaldi://flags/#dns-over-https</b><br/><br/>However, because DoH in Vivaldi works just like in Chrome, it will not encrypt DNS queries unless a user is using an OS-wide DNS server that also has a DoH interface, and is listed on this page.<br/><br/>Most likely, you'll need to add one of those DoH friendly DNS servers to your operating system's DNS settings if you want to make DoH work in Vivaldi, and use it all the time. We got it working by using 1.1.1.1 as our operating system's DNS settings.<br/><br/>A Vivaldi spokesperson said Vivaldi's DoH support might change in the future, based on how Google changes Chromium's DoH support.</p>
      <figure>
        <img src="https://zdnet2.cbsistatic.com/hub/i/2019/11/08/2dd69d38-95cd-4d5d-b000-258de20b2b4d/bcefeb33dade9c4c9a50372ec0cf05f1/doh-vivaldi.png"/>
      </figure>
    </article>
  </body>
</html>