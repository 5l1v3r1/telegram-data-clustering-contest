<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8"/>
    <meta property="og:url" content="https://www.adslzone.net/2019/11/11/procesador-espacio-esa-nasa/"/>
    <meta property="og:site_name" content="ADSLZone"/>
    <meta property="article:published_time" content="2019-11-11T19:00:16+00:00"/>
    <meta property="og:title" content="Por qué un procesador que funciona bien en la Tierra no lo hace en el espacio"/>
    <meta property="og:description" content="La ESA y la NASA están diseñando sus dos próximos chips para el espacio, pero los de nuestros móviles siguen siendo más potentes. Hay una explicación para ello."/>
  </head>
  <body>
    <article>
      <h1>Por qué un procesador que funciona bien en la Tierra no lo hace en el espacio</h1>
      <address><time datetime="2019-11-11T19:00:16+00:00">11 Nov 2019, 19:00</time> by <a rel="author">Alberto García</a></address>
      <p>Los <b>procesadores</b> de nuestros dispositivos están hechos para funcionar bajo las condiciones de la Tierra. Sin embargo, en el espacio se exponen a elementos con los que no tienen que enfrentarse aquí, como es el caso de una <b>radiación excesiva</b>. Por ello, han de diseñarse siguiendo determinados criterios, o te puede pasar como le pasó a los rusos en 2012.</p>
      <h3>Los procesadores del espacio apenas funcionan a unos pocos cientos de MHz</h3>
      <p>En ese año, Rusia lanzó <b>Fobos-Grunt</b>, una sonda que debía ir hasta la luna Phobos, que orbita alrededor de Marte. Sin embargo, se quedó dando vueltas en órbita baja en la Tierra hasta que cayó al mar. Analizando la nave, se dieron cuenta de que la memoria SRAM se había fundido por culpa de partículas muy cargadas de rayos cósmicos, una de las muchas fuentes de radiación a las que tiene que enfrentarse cualquier cosa que se lance al espacio. Este tipo de sucesos se conocen como <b>Single Event Upset</b>, o <b>SEU</b>.</p>
      <figure>
        <img src="https://www.adslzone.net/app/uploads/2019/11/cpu-espacio.jpg"/>
      </figure>
      <p>Para solucionarlo, el ordenador estaba configurado para reiniciarse y recibir señales desde tierra. Sin embargo, las antenas no estaban desplegadas todavía, por lo que no se podían enviar instrucciones ni hacer nada. Un pequeño fallo echó por tierra una misión de miles de millones de euros que llevaba años desarrollándose.</p>
      <p>El procesador más avanzado desplegado actualmente en el espacio es el <b>BAE RAD750</b>. Dos de esos chips son los que lleva el rover <b>Curiosity</b>, alcanzando sólo<b> 200 MHz</b>, y teniendo 256 MB de RAM y un SSD de 2 GB. El diseño del chip RISC está basado en un PowerPC 750 desarrollado por IBM y Motorola y lanzado en 1997 para intentar competir con los Pentium II. El 750 fue usado en el <b>iMac G3</b>, el primer iMac.</p>
      <figure>
        <img src="https://www.adslzone.net/app/uploads/2019/11/imac-g3.jpg"/>
      </figure>
      <p>A pesar de su antigüedad, el RAD750 cuesta unos 200.000 dólares. Si un chip ARM como un Snapdragon 855 no supera los 100 dólares, ¿por qué no lo equipan, siendo además mucho más potente? Ese tipo de mentalidad fue la que siguieron los rusos con Fobos-Grunt, y no les salió muy bien. El chip SRAM usado, de nombre WS512K32V20G24M, se usaba en dispositivos militares y aviones desde 2005, pero diversas pruebas habían demostrado que era vulnerable a la mínima radiación, por lo que claramente no era recomendable su uso en el espacio. A ellos les dio igual, de manera similar con otros componentes de la nave. En concreto, el 62% de los chips que llevaba la nave no estaban diseñados para operar en el espacio con tal de intentar ahorrar costes.</p>
      <p>El procesador del Curiosity funciona a 200 MHz, a pesar de que el PowerPC 750 podía alcanzar hasta 733 MHz. Esto es debido a que, cuanta mayor es la frecuencia de un procesador, mayor es el número de ciclos de procesamiento en un tiempo concreto. Cuando una partícula de radiación llega a la memoria caché L1 o L2 que el procesador usa para almacenar sus cálculos, puede provocar menos daños si hay menos información. Así, hacer más rápidos los procesadores los hace más frágiles.</p>
      <h3>Zafiro o arseniuro de galio: la solución usada antiguamente para chips en el espacio</h3>
      <p>El silicio se comporta muy mal en el espacio ante la radiación ionizante, pero por suerte había una técnica que consiste en coger el diseño de un chip e implementarle un proceso de resistencia a la radiación. Esto se consigue utilizando<b> zafiro o arseniuro de galio</b>, los cuales son más resistentes a la radiación, pero carísimos de fabricar; sobre todo desde cero.</p>
      <p>Sin embargo, en las últimas décadas se ha optado por coger chips comerciales y utilizar técnicas que frenen la presencia de errores como RHBD (Radiation Hardening By Design). Gracias a ello, se pueden usar chips comerciales con ligeras modificaciones que son muy baratas de implementar.</p>
      <p>Uno de estos sistemas es el llamado Triple Modular Redundancy, donde cada chip tiene tres copias idénticas de cada bit de información almacenado en la memoria cache L1 y L2, y donde cada uno de los tres chips de memoria está ubicado en una parte distinta del procesador para evitar verse afectados por la misma partícula.</p>
      <p>Así, si se pierde algún bit en un momento dado, siempre habrá al menos dos copias del mismo. Si la información de los tres es correcta, esa será la buena. Si la información de uno es incorrecta pero la de los otros dos es correcta, entonces esa será la buena. Si la información en los tres es distinta, entonces habrá un error. El problema de esto es que cada instrucción ha de procesarse tres veces, de manera que el procesador es tres veces menos potente de lo que sería si fuera diseñado para funcionar en la Tierra, a lo que hay que sumar que funcionen a menor frecuencia.</p>
      <h3>LEON GR740: el mejor chip de bajo consumo es europeo</h3>
      <p>Así, lo único que hacen es tener chips como los actuales, añadirles más memoria, y proteger el sitio en el que se encuentren lo mejor posible. La Agencia Espacial Europea (ESA) ya casi tiene su propio chip, el <b>LEON GR740</b>, capaz de aguantar 9 SEU al día. Según los cálculos, podría experimentar un error funcional cada 300 años, y puede recuperarse fácilmente de él simplemente reiniciándose. En la siguiente imagen podemos ver una placa prototipo.</p>
      <figure>
        <img src="https://www.adslzone.net/app/uploads/2019/11/leon-gr740-prototipo.jpg"/>
      </figure>
      <p>El chip LEON está basado en la arquitectura SPARC, que es open source. Esta arquitectura fue elegida en los años 90 por su alta penetración en aquel entonces (Sun Microsystems lo usaba en sus estaciones de trabajo), y por no tener que pagar licencias a los fabricantes de chips por usarlo. La ESA tuvo problemas por usar un diseño propietario en el procesador ERC32, que todavía se usa hoy, a pesar de que la arquitectura era open source. Por ello, desarrollaron el LEON, controlado por ellos en su totalidad y con la posibilidad de integrar las funciones de RHBD que necesitasen.</p>
      <p>El GR740 está fabricado en un proceso de<b> 65 nm</b> y es el más potente que han diseñado, operando a… <b>250 MHz.</b> Eso sí, el chip ha sido diseñado para poder seguir operando con un nivel de errores más altos que sus predecesores, ya que tiene un sistema de corrección que permite proteger ante una situación donde una partícula pueda cambiar varios bits a la vez. Así, puede sufrir <b>un error funcional en 1.310 años</b>, y en ese caso también se reiniciaría como el ERC20.</p>
      <p>Además, el GR740 puede resistir niveles de radiación elevadísimos. El chip ha cumplido todos los tests, aguantando incluso 125 MeV.cm<sup>2</sup>/mg. En comparación, el chip de SRAM que acabó frito del Fobos-Grunt recibió sólo 0,375 MeV.cm<sup>2</sup>/mg, unas 333 veces menos.</p>
      <h3>HSPC: el chip de Estados Unidos será el más rápido del espacio en 2022</h3>
      <p>Estados Unidos, por su parte, tiene un mayor presupuesto, y llevan más tiempo fabricando chips. Tradicionalmente han usado dos arquitecturas: PowerPC, de IBM y Motorola; y x86, de Intel, siendo ambas propietarias. Por ello, han decidido seguir diseñando sus chips propietarios con el <b>High Performance Spaceflight Computing (HPSC)</b>, basado en arquitectura de ARM.</p>
      <p>El chip ha sido diseñado por la NASA, Air Force Research Laboratory, y Boeing, siendo esta última quien los fabrica. El chip está basado en la arquitectura ARM Cortex A53 de cuatro núcleos. Tiene dos chips, por lo que tiene 8 núcleos, y rinde similar a un móvil de gama media de 2018, aunque al pasar por el proceso de protección ante radiación se quedará en apenas un tercio de ese rendimiento. A pesar de ello, el salto de rendimiento es enorme con respecto a los chips usados actualmente. Si bien esos núcleos de ARM en un Snapdragon 450 alcanzarían 1,2 GHz, en el caso del HPSC se quedan en unos 500 MHz, siendo el procesador del espacio más rápido.</p>
      <p>El GR740 de la ESA tiene un <b>TDP de 1,5 vatios</b>. El <b>RAD5545</b>, que es el más potente disponible actualmente, alcanza <b>466 MHz</b> y está fabricado en un proceso de 45 nanómetros. Su TDP es de <b>20 vatios</b>, mucho más que el GR740. El HPSC tiene un TDP de<b> 10 vatios</b>.</p>
      <p>Estados Unidos diseña chips con un mayor consumo porque planea usarlos para rovers y para llevar personas a otros planetas, a diferencia de la ESA que está centrada en satélites y sondas. En Marte será vital conocer elementos como la salud de los astronautas en tiempo real, donde incluso planean diseñar sistemas de realidad aumentada para ver sus constantes vitales en el cristal del casco. A su vez, los chips actuales son muy lentos a la hora de procesar las fotos que toman los rovers, además de no poder usar algoritmos para utilizar la información de los sensores para prevenir posibles eventos adversos.</p>
      <figure>
        <img src="https://www.adslzone.net/app/uploads/2019/11/hpsc-usos.jpg"/>
      </figure>
      <p>El HPSC puede ser configurado con entre 7 y 10 vatios de consumo, procesando entre 9 y 15 GOPS (gigaoperaciones por segundo). Para monitorizar la salud de los pilotos se necesitan entre 10 y 50 GOPS, además de entre 50 y 100 GOPS para los sistemas de realidad aumentada y otros para los gráficos avanzados. Por suerte, el HPSC puede configurarse en paralelo para usar otros chips a la vez, lo cual aumenta su versatilidad.</p>
      <p>El <b>LEON GR740 estará disponible para la ESA a finales de este año</b>, y será equipado en los primeros satélites en 2020. El <b>HPSC empezará a fabricarse en 2021</b> y empezará a equiparse en dispositivos en el año 2022, y será probablemente el chip que use Estados Unidos en las naves que usen para visitar nuevamente la luna en el año 2024.</p>
    </article>
  </body>
</html>