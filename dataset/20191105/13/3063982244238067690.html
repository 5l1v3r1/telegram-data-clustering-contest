<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8"/>
    <meta property="og:url" content="https://www.golem.de/news/cache-partitionierung-javascript-selber-zu-hosten-lohnt-sich-bald-mehr-1911-144809.html"/>
    <meta property="og:site_name" content="Golem.de"/>
    <meta property="article:published_time" content="2019-11-05T13:05:02+00:00"/>
    <meta property="og:title" content="Javascript selber zu hosten, lohnt sich bald mehr"/>
    <meta property="og:description" content="Aus Sicherheitsgründen planen mehrere Browserhersteller, künftig ihre Caches nach Webseiten zu trennen. Das Laden von Resourcen über CDN-Netze lohnt sich danach nicht mehr."/>
  </head>
  <body>
    <article>
      <h1>Javascript selber zu hosten, lohnt sich bald mehr</h1>
      <h2>Aus Sicherheitsgründen planen mehrere Browserhersteller, künftig ihre Caches nach Webseiten zu trennen. Das Laden von Resourcen über <a href="https://www.golem.de/specials/cdn/">CDN</a>-Netze lohnt sich danach nicht mehr.</h2>
      <address><time datetime="2019-11-05T13:05:02+00:00">05 Nov 2019, 13:05</time> by <a rel="author">Hanno Böck</a></address>
      <p>Mehrere Browserhersteller planen Änderungen, die dazu führen werden, dass Webressourcen nicht mehr über verschiedene Webseiten hinweg gecacht werden. Darüber berichtet der Web-Programmierer <a href="https://www.jefftk.com/p/shared-cache-is-going-away">Jeff Kaufman in einem Blogpost</a>. Der Grund dafür sind mögliche Seitenkanalangriffe. Für Webseitenbetreiber bedeutet diese Änderung, dass es in vielen Fällen vorteilhaft sein wird, gängige Webressourcen wie beispielsweise Javascript-Bibliotheken oder Fonts selbst zu hosten und nicht von externen Quellen einzubinden.</p>
      <p>Bisher war es so: Wenn zwei verschiedene Webseiten dieselbe Datei einbinden, kann diese beim Laden der zweiten Webseite aus dem Cache geladen werden. Üblich ist das etwa bei Javascript-Bibliotheken. Wer die häufig genutzte Jquery-Bibliothek einsetzt, lädt diese häufig von einem von den Jquery-Entwicklern bereitgestellten Host. Auch gibt es verschiedene CDN-Anbieter für gängige Javascript-Bibliotheken.</p>
      <h4>Gemeinsamer Cache kann für Seitenkanalangriffe genutzt werden</h4>
      <p>Aus Performancegründen hat das naheliegende Vorteile: Bei fast allen Nutzern dürfte die aktuelle Version der Jquery-Bibliothek bereits im Browsercache vorhanden sein, sie muss nicht erneut heruntergeladen werden.</p>
      <p>Doch das Caching kann zu Sicherheitsproblemen führen. Angreifer können dieses Verhalten nutzen, um herauszufinden, ob eine andere Person in jüngerer Zeit auf einer bestimmten Webseite unterwegs war. Dies geht etwa, indem man eine dort eingebundene Ressource aufruft und anschließend misst, wie schnell der Ladevorgang durchgeführt wurde.</p>
      <p>Solche Angriffe, die auch <a href="https://github.com/xsleaks/xsleaks/wiki/Browser-Side-Channels">Cross-Site-Leaks oder XS-Leaks</a> genannt werden, sind schon länger bekannt, aber sie wurden zuletzt <a href="https://sirdarckcat.blogspot.com/2019/03/http-cache-cross-site-leaks.html">immer weiter verbessert</a>. Das führt jetzt dazu, dass die Entwickler von <a href="https://www.chromestatus.com/feature/5730772021411840">Chrome</a> und <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1536058">Firefox</a> den Cache künftig nach Webseiten trennen werden. Aktiv ist die Funktion in den Browsern noch nicht, es ist aber davon auszugehen, dass dies in künftigen Versionen zur Standardeinstellung wird. In Safari gibt es bereits jetzt eine entsprechende Funktionalität.</p>
      <p>Konkret bedeutet das: Wenn dieselbe Webseite mehrfach aufgerufen wird, werden die Daten aus dem Cache geladen. Ruft aber eine andere Webseite die von der ersten Webseite genutzten Ressourcen ab, werden diese erneut geladen, da die Caches der Seiten getrennt sind.</p>
      <h4>Laden vom eigenen Host ohne Cache schneller</h4>
      <p>Wer als Betreiber einer Webseite gängigen Javascript-Code oder andere Ressourcen - beispielsweise Schriftarten - von einem externen Host zieht, sollte sich überlegen, ob dies in Zukunft noch Sinn macht. Denn in Sachen Geschwindigkeit dürfte das Selbsthosten vorteilhafter sein. Dank der HTTP-Funktion Keep-Alive oder mittels HTTP/2 können mehrere Dateien vom selben Host über eine Verbindung abgerufen werden. Generell ist es außerdem natürlich sinnvoll, darauf zu achten, nicht unnötig viele Ressourcen einzubinden und Javascript- sowie CSS-Dateien komprimiert auszuliefern.</p>
      <p>Bei vielen externen Ressourcen, die üblicherweise auf Webseiten eingebunden werden, handelt es sich um Code oder Daten unter freien Lizenzen, aus rechtlicher Sicht ist das Selbsthosten daher in vielen Fällen kein Problem. Jquery beispielsweise steht unter der freien MIT-Lizenz. Auch die häufig von Webseiten eingebundenen Google Fonts stehen alle unter freien Lizenzen und können damit legal selbst gehostet werden.</p>
      <p>Aus Sicherheits- und Datenschutzgründen hat es ebenfalls Vorteile. So kann beispielsweise eine <a href="https://www.golem.de/news/websicherheit-verwaiste-domains-als-sicherheitsrisiko-1709-129917.html">Kompromittierung der Hosts von Webressourcen dazu führen</a>, dass Webseiten angegriffen werden. Auch vermeidet man dadurch das Übertragen von Daten über den Webseitenbesuch an Dritte.</p>
    </article>
  </body>
</html>