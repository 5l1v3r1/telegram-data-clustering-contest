<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8"/>
    <meta property="og:url" content="https://www.heise.de/ix/meldung/Angeblich-mit-Intelligenz-Microsoft-SQL-Server-2019-ist-erschienen-4578248.html"/>
    <meta property="og:site_name" content="iX Magazin"/>
    <meta property="article:published_time" content="2019-11-05T14:26:00+00:00"/>
    <meta property="og:title" content="Microsofts &quot;intelligente Datenbank&quot;: Microsoft SQL Server 2019 ist erschienen"/>
    <meta property="og:description" content="Die neue Ausgabe des SQL Servers bewirbt Hersteller Microsoft als intelligente Datenbank."/>
  </head>
  <body>
    <article>
      <h1>Microsofts "intelligente Datenbank": Microsoft SQL Server 2019 ist erschienen</h1>
      <h2>Die neue Ausgabe des SQL Servers bewirbt Hersteller Microsoft als intelligente Datenbank.</h2>
      <address><time datetime="2019-11-05T14:26:00+00:00">05 Nov 2019, 14:26</time> by <a rel="author">Holger Schwichtenberg</a></address>
      <p>Microsoft hat im Rahmen der Ignite-Konferenz die 2019er Version seines Datenbankmanagementservers veröffentlicht. Hinter Marketingbegriffen wie "Big Data Cluster" und "Intelligent Database" verbergen sich eine Reihe von konkreten Verbesserungen im Bereich Clustering und Performance. Neu ist auch, dass der SQL Server nun Java intern ausführen kann.</p>
      <p>Microsoft vermarktet den neuen Server 2019 (interne Versionsnummer 15.0) direkt an mehreren Stellen mit dem Schlagwort "intelligent". Unter dem Oberbegriff "Intelligent Database" findet man in dem Dokument <a href="https://docs.microsoft.com/en-us/sql/sql-server/what-s-new-in-sql-server-ver15?view=sql-server-ver15">What's new in SQL Server 2019?</a> die Unterrubriken Intelligent Query Processing, In-Memory-Database, Intelligent Performance und Monitoring.</p>
      <h3>Leistungsverbesserungen</h3>
      <p>Als Intelligent Query Processing (IQP) bezeichnet Microsoft eine Reihe von Optimierungen bei der <a href="https://docs.microsoft.com/en-us/sql/relational-databases/performance/intelligent-query-processing?view=sql-server-ver15#approximate-query-processing">Verarbeitung von Abfragen </a>So gibt es nun eine Funktion APPROX_COUNT_DISTINCT(expression), die deutlich schneller ist als der Einsatz von COUNT(DISTINCT …), aber nicht ganz exakte Ergebnisse liefert, was bei der Verarbeitung großer Datenmengen in einigen Szenarien ein Kompromiss sein kann.<br/><br/>Als "Intelligent Performance" bezeichnet das Unternehmen eine Reihe von darüber hinausgehenden Verbesserungen der Ausführungsgeschwindigkeit von Datenbankoperationen. Einige davon sind interner Art und ohne Zutun des Nutzers verfügbar. Das gilt zum Beispiel für die Erhöhung der <a href="https://blogs.msdn.microsoft.com/bobsql/2019/02/11/sql-server-log-writer-workers/">Log Writer Workers</a>. Andere Features muss der Datenbankadministrator oder Entwickler explizit aktivieren. So kann er nun beim Anlegen eines Index den Zusatz OPTIMIZE_FOR_SEQUENTIAL_KEY, angeben, was das Einfügen von Datensätzen in einen Index mit sequentiellen Schlüsselwerten beschleunigt.<br/><br/>Im Bereich der In-Memory-Database, deren erste Features der Hersteller in SQL Server 2014 eingeführt hatte, bietet die 2019er Version nun auch an, die Metadaten der TempDB <a href="https://docs.microsoft.com/en-us/sql/relational-databases/databases/tempdb-database?view=sql-server-ver15#memory-optimized-tempdb-metadata">im RAM zu halten</a>.<br/><br/>Mit einem Database Snapshot kann eine Datenbankadministrator eine nicht beschreibbare Momentaufnahme der Datenbank erzeugen, etwa für eine Auswertung oder einen Bericht. Der Snapshot verbraucht dabei zu Beginn keinen Speicher. Erst wenn die Originaldatenbank sich verändert, muss der Snapshot <a href="https://docs.microsoft.com/en-us/sql/relational-databases/databases/database-snapshots-sql-server?view=sql-server-ver15">die Abweichungen vom Original ablegen</a>, um den Nutzer stets den Datenbestand zum Zeitpunkt seiner Erstellung zu liefern.</p>
      <h3>Monitoring der Ausführungspläne</h3>
      <p>Im Bereich des Monitorings bietet der SQL Server eine neue Ansicht der letzten Abfrage-Ausführungspläne (Last Query Plan Statistics). Diese Statistik muss der Datenbankadministrator mit der Konfigurationseinstellung LAST_QUERY_PLAN_STATS auf Datenbankebene aktivieren. Der Aufruf der Informationen kann dann mit der dynamic management function sys.dm_exec_query_plan_stats erfolgen. <br/><br/>Die bereits in SQL Server 2014 eingeführte und in SQL Server 2016 verbesserte Lightweight Query Profiling Infrastructure (LWP) hat Microsoft verbessert. Sie ist nun im Standard für die <a href="https://www.sqlshack.com/lightweight-performance-profiling-in-sql-server-2019/">Live QueryStatistics</a> im SQL Server Management Studio aktiviert. Das Feature lässt sich jedoch über die Datenbank-Konfigurationseinstellung LIGHTWEIGHT_QUERY_PROFILING deaktivieren.</p>
      <h3>Big Data Cluster</h3>
      <p>Als SQL Server 2019 <a href="https://docs.microsoft.com/en-us/sql/big-data-cluster/release-notes-big-data-cluster?view=sql-server-ver15">Big Data Cluster </a>(BDC) bezeichnet Microsoft einen Linux-basierten Container-Verbund aus SQL Server und Apache Spark in Kubernetes oder Azure Kubernetes Services (AKS), jeweils ab Version 1.13. Die Speicherung erfolgt im Hadoop Distributed File System (HDFS) auf Basis verschiedener Storage-Provider (siehe Abbildung 1).</p>
      <figure>
        <img src="https://www.heise.de/imgs/18/2/7/8/2/7/9/6/sql-server-big-data-cluster-d0b75cdb85cca95d.png"/>
        <figcaption>SQL Server Big Data Cluster<cite>(Bild: Microsoft)</cite></figcaption>
      </figure>
      <p>Das in SQL Server 2016 eingeführt Feature <a href="https://docs.microsoft.com/en-us/sql/relational-databases/polybase/polybase-guide?view=sql-server-ver15">PolyBase</a> für den Zugriff auf externe Hadoop- und Azure Blog Storage-Datenquellen via T-SQL erweitert Microsoft in SQL Server 2019 um den Zugriff auf Oracle, MongoDB, Terradata und andere SQL Server-Instanzen. Auch einen <a href="https://docs.microsoft.com/en-us/sql/relational-databases/polybase/polybase-configure-odbc-generic?view=sql-server-ver15">Connector für ODBC</a> gibt es nun. Hier spricht Microsoft im Marketing nun von "Data Virtualization".<br/><br/>Bei den Zeichensätzen unterstützt der SQL Server 2018 nun auch <a href="https://cloudblogs.microsoft.com/sqlserver/2018/12/18/introducing-utf-8-support-in-sql-server-2019-preview/">UTF-8</a> bei der Sortierung von Zeichenketten sowie dem Im- und Export von Datensätzen. <br/><br/>Bei der <a href="https://docs.microsoft.com/de-de/sql/t-sql/queries/match-sql-graph?view=sql-server-ver15">Match-Operation in einer Graph-Datenbank</a> ist nun die Funktion SHORTEST_PATH erlaubt. Zudem ermöglicht eine Graph-Datenbank die bisher nur bei relationalen Datenbanken erlaubte Partitionierung von Tabellen und Index.</p>
      <h3>Java im SQL Server</h3>
      <p>Mit SQL Server 2019 bietet Microsoft erstmal an, Java-Code innerhalb des DBMS zu nutzen. Innerhalb eines SQL-Skripts kann der Nutzer die Stored Procedure "sp_execute_external_script" <a href="https://docs.microsoft.com/en-us/sql/language-extensions/how-to/call-java-from-sql?view=sql-server-ver15">unter Angabe eines Java-Klassennamens</a> aufrufen. Diese Java-Klasse muss eine der beiden abstrakten Klassen AbstractSqlServerExtensionExecutor oder AbstractSqlServerExtensionDataset aus dem Microsoft Extensibility SDK for Java for SQL Server implementieren. Das SDK ist als Open Source <a href="https://github.com/microsoft/sql-server-language-extensions">auf Github verfügbar</a>.<br/><br/>Bisher unterstütze der SQL Server in seinem Inneren nur Transact-SQL (T-SQL) und .NET-Klassen mit C# oder Visual Basic .NET. Zukünftig ist die Integration weiterer Programmiersprachen möglich auf Basis der <a href="https://docs.microsoft.com/de-de/sql/language-extensions/language-extensions-overview?view=sql-server-ver15">SQL Server Language Extensions</a>.</p>
      <h3>Sichere Enklaven für verschlüsselte Daten</h3>
      <p>Seit SQL Server 2016 bietet Microsoft mit Always Encrypted die Verschlüsselung von Daten vom Client bis zum DBMS an, sodass selbst Datenbankadministratoren die Daten nicht einsehen können. Dementsprechend war die Datenverarbeitung der verschlüsselten Spalten auf Gleichheitsoperationen beschränkt. <br/><br/>In SQL Server 2019 ergänzt Microsoft mit <a href="https://docs.microsoft.com/de-de/sql/relational-databases/security/encryption/always-encrypted-enclaves?view=sql-server-ver15">Secure Enclaves</a> die Möglichkeit, die verschlüsselten Daten in eine abgetrennten Blackbox auf dem Datenbankserver im Klartext zu verarbeiten (siehe Abbildung 2). Es gibt aber keine Möglichkeit, Daten oder Code innerhalb einer solchen Enklave von außen einzusehen, auch nicht mit DB-Administratorrechten und einem Debugger.</p>
      <figure>
        <img src="https://www.heise.de/imgs/18/2/7/8/2/7/9/6/image2-266eafcaf42ab538.png"/>
        <figcaption>Secure Enclaves als Erweiterung für Always Encrypted in Microsoft SQL Server 2019<cite>(Bild: Microsoft)</cite></figcaption>
      </figure>
      <h3>Schnellere Wiederherstellung</h3>
      <p>Die Datenbankwiederherstellung beschleunigt Microsoft durch <a href="https://docs.microsoft.com/en-us/sql/relational-databases/backup-restore/restore-and-recovery-overview-sql-server?view=sql-server-ver15#adr">Accelerated Database Recovery</a> (ADR). Durch die Aktivierung dieses Features auf Datenbankebene (ACCELERATED_DATABASE_RECOVERY) soll auch ein Rollback langlaufender Transaktionen schneller werden.</p>
      <p>In einem Blogeintrag betont Microsoft, dass die neuen Features von SQL Server 2019 ohne eine Erhöhung der Lizenzkosten <a href="https://cloudblogs.microsoft.com/sqlserver/2019/11/04/gain-intelligence-over-data-with-sql-server-2019-now-generally-available/">verfügbar sind</a>. Kunden mit einem Software Assurance-Vertrag erhalten zusätzlich <a href="https://cloudblogs.microsoft.com/sqlserver/2019/10/30/new-high-availability-and-disaster-recovery-benefits-for-sql-server/">kostenfrei Disaster Recovery-Replikate</a> in der Microsoft Azure-Cloud. (<i>Holger Schwichtenberg</i>) / (<a href="mailto:akl@ct.de">akl</a>)</p>
    </article>
  </body>
</html>