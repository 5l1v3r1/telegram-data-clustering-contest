<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8"/>
    <meta property="og:url" content="https://blog.selectel.ru/disaster-recovery-vs-high-availability/"/>
    <meta property="og:site_name" content="Блог компании Селектел"/>
    <meta property="article:published_time" content="2019-11-19T11:00:16+00:00"/>
    <meta property="og:title" content="Disaster Recovery vs High Availability"/>
    <meta property="og:description" content="Business continuity (непрерывность выполнения бизнес-задач) — один из самых популярных запросов при построении инфраструктуры."/>
  </head>
  <body>
    <article>
      <h1>Disaster Recovery vs High Availability</h1>
      <address><time datetime="2019-11-19T11:00:16+00:00">19 Nov 2019, 11:00</time> by <a rel="author">Камилла Гарифуллина</a></address>
      <figure>
        <img src="https://blog.selectel.ru/wp-content/uploads/2019/11/PR-11007_750x394_blog_main_vk2x.png.png"/>
      </figure>
      <p><b>Business continuity</b> (непрерывность выполнения бизнес-задач) — один из самых популярных запросов при построении инфраструктуры. Для того, чтобы ее обеспечить, используются два основных подхода: High Availability и Disaster Recovery. Мы постарались рассмотреть оба подхода и показать преимущества и контекст применения каждого.</p>
      <p><b>Отказоустойчивость</b> (High Availability) позволяет продолжать выполнение бизнес-задач при выходе из строя какого-либо компонента инфраструктуры.</p>
      <p><b>Катастрофоустойчивость</b> (Disaster Recovery) же позволяет продолжать выполнение бизнес-задач при выходе из строя ЦОД целиком, например, из-за отключения электричества на длительное время, пожара или любого иного масштабного природного явления.</p>
      <p>Итоговый выбор зависит от типа задач, с которыми нужно будет работать.</p>
      <p>Рассмотрим основные моменты:</p>
      <table bordered="">
        <tr>
          <th>Отказоустойчивость High Availability</th>
          <th>Катастрофоустойчивость Disaster Recovery</th>
        </tr>
        <tr>
          <td>Восстановление работоспособности после единичных или не связанных между собой отказов компонентов Технология отработки отказов предполагает, что в работу вводятся резервные компоненты каждой подсистемы либо оставшиеся компоненты многократно дублированной подсистемы перераспределяют между собой работу независимо от того, что происходит в это время в других подсистемах</td>
          <td>Сохранение данных и продолжение работы в условиях массовых или последовательных отказов систем Технология отработки отказов требует учета взаимосвязанности подсистем и способности систем реагировать на каждый вариант развития событий «сценарий катастрофы» с целью обеспечения максимально возможной сохранности защищаемых данных</td>
        </tr>
      </table>
      <p>Услуги по обеспечению непрерывности весьма востребованы, так как <b>в любых технически сложных системах аварии неизбежны</b>.</p>
      <p>В финансовом секторе и промышленном производстве к высокому спросу подталкивают требования обеспечения непрерывности бизнеса, накладываемые регуляторами. В остальных сегментах, например, для торговых сетей, построение отказоустойчивых инфраструктур или их аренда (как в ЦОД, так и облачных провайдеров) объясняется растущей конкуренцией.</p>
      <p>Для обеспечения непрерывности бизнеса (Business Continuity) необходимо подготовить два плана:</p>
      <ul>
        <li><b>BCP</b> (Business Continuity Plan) – план обеспечения непрерывности бизнеса с детальным описанием того, что необходимо сделать для восстановления бизнес-процессов.</li>
        <li><b>DRP</b> (Disaster Recovery Plan) – план восстановления после катастрофы с описанием действий по восстановлению инфраструктуры. Обычно подразумевается IT-инфраструктура, но это могут быть также и самые разные механизмы, автотранспорт и здания.</li>
      </ul>
      <p>При выходе из строя офисного здания, сгорания склада или поломки автомобиля DRP будет описывать как оперативно запустить новое офисное здание, открыть запасной склад или использовать запасные части для ремонта автомобиля.</p>
      <p>BCP же будет описывать, как организовать удаленную работу сотрудников, перенаправить поступающие товары на новый склад или вызвать такси.</p>
      <p>Оба плана должны разрабатываться, исходя из требований бизнеса, и использоваться сразу после возникновения аварии. В них должны содержаться протестированные наборы инструкций и список ответственных, которые эти инструкции должны выполнить.</p>
      <h3>Технологии резервирования</h3>
      <p>Непрерывность бизнеса подразумевает использование резервной площадки под инфраструктуру. Речь при этом идет не про резервное копирование данных на сервер в соседней стойке или в облако, хотя и это, несомненно, очень важно. В случае форс-мажора необходимо иметь запасную площадку, на которой можно будет развернуть необходимые для поддержания работы мощности, при этом не упустив драгоценное время на поиск, сборку и подключение необходимого оборудования.</p>
      <p>Выделяют три вида резервов:</p>
      <h4>Холодный резерв</h4>
      <p>Некое серверное помещение с запасным оборудованием. В «сценарии катастрофы» может планироваться закупка либо хранение оборудования на складе.</p>
      <p>Следует помнить, что большая часть оборудования поставляется под заказ и оперативно ввести в работу десятки единиц серверов, СХД, коммутаторов представляется маловероятным.</p>
      <p>Помимо склада с оборудованием можно предусмотреть хранение наиболее важного или редкого оборудования на складах поставщиков, например, с предварительно проведенными телекоммуникационными каналами в помещении. Восстановление работы в таком ЦОД при катастрофическом сбое основной площадки может растянуться на несколько недель. При выборе такого варианта убедитесь, что ваша компания сможет просуществовать эти несколько недель без ощутимых финансовых потерь.</p>
      <h4>Теплый резерв</h4>
      <p>Существующая функционирующая дополнительная площадка, для которой настроены интернет и WAN-каналы, базовая телекоммуникационная и вычислительная инфраструктура. Основное оборудование должно быть подключено и всегда готово к переводу нагрузки.</p>
      <p>Такая площадка «слабее» основной по вычислительным мощностям, некоторое оборудование может отсутствовать, но важно, чтобы на площадке всегда была актуальная резервная копия данных. Для запуска такой системы требуется не более одного дня. Данный вариант в настоящее время является весьма популярным решением из-за соотношения цена-качество, а также приемлемого времени ввода в эксплуатацию.</p>
      <h4>Горячий резерв</h4>
      <p>Серверная площадка с оборудованием, производительность которого соответствует оборудованию основной площадки, а все данные основной площадки регулярно реплицируются. Такая площадка с готовой инфраструктура, настроенными каналами и актуальными версиями программного обеспечения запускается в пределах установленного RTO.</p>
      <p>Минус как горячего, так и теплого резерва – простой оборудования. Одним из решений может стать решение использовать две площадки равномерно – большинство приложений могут работать как на одной, так и на другой. При использовании мощности всего оборудования можно обеспечить балансировку нагрузки, например, на одно из приложений при ожидаемом пике.</p>
      <h3>Отказоустойчивость</h3>
      <p>Под «Отказоустойчивостью» понимается свойство системы сохранять работоспособность в случае случайного выхода из строя или сбоя отдельных компонентов. Критерий надежности может определятся количеством «девяток после запятой»:</p>
      <table bordered="">
        <tr>
          <th>Доступность</th>
          <th>Downtime в год</th>
          <th>Downtime в месяц</th>
          <th>Downtime в день</th>
        </tr>
        <tr>
          <td>99.9%</td>
          <td>8,77 часов</td>
          <td>43,83 минут</td>
          <td>1,44 минуты</td>
        </tr>
        <tr>
          <td>99.99%</td>
          <td>52,60 минут</td>
          <td>4,38 минут</td>
          <td>8,64 секунды</td>
        </tr>
        <tr>
          <td>99.999%</td>
          <td>5,26 минут</td>
          <td>26,30 секунд</td>
          <td>86,00 миллисекунд</td>
        </tr>
      </table>
      <h4>Как измеряется High Availability</h4>
      <p>Процент доступности рассчитывается следующим образом:</p>
      <p>
        <b>доступность = (минуты в месяце — минуты простоя) * 100 / минут в месяц</b>
      </p>
      <p>Поставщик услуг обычно предоставляет показатели доступности в своих соглашениях об уровне обслуживания (SLA). При этом обслуживание системы и запланированное время простоя являются неотъемлемой частью этого соглашения. Если в SLA заявлено 99,999%, конечный пользователь может ожидать, что услуга будет недоступна в течение следующих промежутков времени:</p>
      <table bordered="">
        <tr>
          <th>Временной период</th>
          <th>Время недоступности системы</th>
        </tr>
        <tr>
          <td>День</td>
          <td>0,9 секунд</td>
        </tr>
        <tr>
          <td>Неделя</td>
          <td>6,0 секунд</td>
        </tr>
        <tr>
          <td>Месяц</td>
          <td>26,3 секунд</td>
        </tr>
        <tr>
          <td>Год</td>
          <td>5 минут и 15,6 секунд</td>
        </tr>
      </table>
      <p>Если провайдер услуг придерживается стандарта «три девятки» (99,9%), то это означает, что в течение одного года допустимо около 8 часов и 45 минут простоя системы.</p>
      <h4>Как обеспечить High Availability</h4>
      <p>Система с высокой доступностью должна иметь возможность быстрого восстановления после любого вида сбоя, чтобы минимизировать прерывания для конечного пользователя.</p>
      <p>Высокая доступность является результатом тщательного планирования при проектировании системы, включая создание «сценария катастрофы», в котором будут учтены последствия стихийных бедствий, пожаров, актов терроризма и так далее.</p>
      <p>Инфраструктура, настроенная для обеспечения непрерывной доступности, должна иметь дополнительное (избыточное) аппаратное и программное обеспечение, благодаря которому в случае сбоя система останется работоспособной.</p>
      <p>Другими словами, любой аппаратный или программный компонент, который может дать сбой, должен иметь дублирующий компонент того же типа. При возникновении сбоя процесс аварийного переключения переместит обработку, выполняемую отказавшим компонентом, на дублирующий компонент, уменьшив время простоя системы.</p>
      <h3>Катастрофоустойчивость</h3>
      <p>Под катастрофоустойчивостью подразумевается способность системы сохранить критически важные данные и продолжить выполнять свои функции после массового (возможно, целенаправленного) уничтожения его компонентов в результате различных форс-мажорных ситуаций. Этому определению точно соответствует англоязычный термин «Disaster Tolerance» (DT), однако в общем случае термин «Disaster Recovery» (DR) (дословно «Восстановление после катастрофы») можно также переводить как «катастрофоустойчивость». Отличие DR от DT состоит в том, что DR концентрирует внимание на сохранности данных (при строго контролируемых потерях, если они неизбежны).</p>
      <p>В основу устойчивого к катастрофам ЦОД часто закладывается территориально-распределенная кластерная конфигурация серверов с подключением к общей сети хранения данных. Узлы разнесенного кластера размещаются на основной и резервной площадках, образуя единую систему. Это обеспечивает непрерывную доступность сервисов даже в случае сбоя основного ЦОД. Возможна экономичная модификация решения, при которой удаленный ЦОД функционирует в резервном режиме и, в случае отказа основного ЦОД, поддерживает ограниченный набор сервисов.</p>
      <p>Для защиты от природных, техногенных катастроф или терактов и обеспечения непрерывности бизнес-процессов необходимо резервирование основных систем хранения и обработки данных. В случае катастрофы может пострадать здание центра обработки данных, поэтому создание территориально удаленной площадки – резервного дата-центра – необходимо. Когда уровня надежности Tier III не хватает, географически распределенная катастрофоустойчивая инфраструктура ЦОД способна гарантировать доступность четыре и даже пять девяток.</p>
      <h3>Непрерывность работы виртуальных дата-центров</h3>
      <p><a href="https://selectel.ru/services/cloud/vmware/?utm_source=blog.selectel.ru&amp;utm_medium=inner_referral">Облако на базе VMware</a> представляет собой облачную инфраструктуру (IaaS) на базе платформы VMware vSphere® и VMware vCloud Director® и предназначено для получения вычислительных ресурсов с удаленным доступом на базе облачной платформы VMware Cloud.</p>
      <p>Совокупность виртуальных облачных вычислительных ресурсов (процессоры, память, место на диске, сети) называется виртуальным дата-центром.</p>
      <p>При построении отказоустойчивой облачной инфраструктуры необходимо создавать одновременно основной и резервный дата-центры, расположенные в разных локациях, которые могут находится в одном физическом здании ЦОД.</p>
      <p>При построении катастрофоустойчивой облачной инфраструктуры необходимо создавать одновременно основной и резервный дата-центры, которые будут располагаться в разных регионах, то есть в географически удаленных друг от друга физических ЦОД.</p>
      <p>Все изменения системы в основном виртуальном дата-центре в реальном времени должны резервироваться и добавляться в резервный виртуальный дата-центр, благодаря чему выход из строя любого компонента системы не повлияет на выполнение бизнес-задач. При аварии вместо основного дата-центра подключается резервный во временных рамках, обозначенных RPO и RTO.</p>
      <h3>Вместо заключения</h3>
      <p>В современном мире бизнес напрямую зависит от IT-инфраструктуры, обеспечивающей своевременный доступ к информации (счетам, информации о клиентах, контрагентам, договорам и так далее). Требования к информационным системам, обеспечивающим непрерывность бизнеса, ужесточаются, поскольку цена минуты простоя такой информационной системы со временем только увеличивается.</p>
      <p>Чтобы обеспечить функционирование своих информационных систем современные бизнесы стремятся повысить отказоустойчивость, например, за счет избыточности входящих в нее компонентов и обращают особое внимание на условия эксплуатации поддерживающего ее IT-оборудования:</p>
      <ul>
        <li>средства бесперебойного электроснабжения,</li>
        <li>системы климатического контроля,</li>
        <li>специальные стойки для размещения оборудования,</li>
        <li>охранно-пожарная сигнализация.</li>
      </ul>
      <p>Желаем успеха в построении надежных IT-инфраструктур и будем рады поделиться нашей собственной экспертизой. Задавайте любые интересующие вопросы в комментариях, а также наших социальных сетях: <a href="http://vk.com/selectel">ВКонтакте</a>, <a href="https://www.facebook.com/selectel">Фейсбуке</a> и <a href="https://twitter.com/selectel">Твиттере</a>.</p>
      <p>
        <i>Полезные статьи и материалы по теме:</i>
      </p>
      <ul>
        <li>
          <a href="https://blog.selectel.ru/oxlazhdenie-cod-pesn-lda-i-plameni/?utm_source=blog.selectel.ru&amp;utm_medium=inner_referral">Охлаждение ЦОД: песнь льда и пламени</a>
        </li>
        <li>
          <a href="https://blog.selectel.ru/put-elektrichestva-v-data-centre/?utm_source=blog.selectel.ru&amp;utm_medium=inner_referral">Электричество в дата-центре</a>
        </li>
        <li>
          <a href="https://blog.selectel.ru/obzor-reshenij-dlya-pozharotusheniya-cod/?utm_source=blog.selectel.ru&amp;utm_medium=inner_referral">Обзор решений для пожаротушения ЦОД</a>
        </li>
      </ul>
    </article>
  </body>
</html>