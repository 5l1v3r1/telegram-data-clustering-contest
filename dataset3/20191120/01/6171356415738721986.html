<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8"/>
    <meta property="og:url" content="https://www.androidpolice.com/2019/11/19/google-wants-android-to-use-regular-linux-kernel-potentially-improving-updates-and-security/"/>
    <meta property="og:site_name" content="Android Police"/>
    <meta property="article:published_time" content="2019-11-20T01:43:45+00:00"/>
    <meta property="og:title" content="Google wants Android to use regular Linux kernel, potentially improving updates and security"/>
    <meta property="og:description" content="Android is built on top of the Linux kernel, but it has always used a heavily-modified version with changes from OEMs, chip manufacturers like Qualcomm"/>
  </head>
  <body>
    <article>
      <h1>Google wants Android to use regular Linux kernel, potentially improving updates and security</h1>
      <address><time datetime="2019-11-20T01:43:45+00:00">20 Nov 2019, 01:43</time> by <a rel="author" href="https://www.androidpolice.com/author/corbin-davenport/" target="_blank">Corbin Davenport</a></address>
      <p>Android is built on top of the Linux kernel, but it has always used a heavily-modified version with changes from OEMs, chip manufacturers like Qualcomm and MediaTek, and Google. There have been efforts over the years to close the gap between the two kernels, but now Google is getting more serious about it.</p>
      <p>At this year's Linux Plumbers Conference, Google engineers held talks about the company's efforts to get Android as close as possible to the mainline Linux kernel. Not only would this reduce technical overhead for Google and other companies, because they would no longer have to merge thousands of changes into each new Linux kernel version (and Google would no longer have to support Linux kernel versions for <a href="https://arstechnica.com/gadgets/2017/09/android-users-rejoice-linux-kernel-lts-releases-are-now-good-for-6-years/">six years</a>), but it could also benefit the Linux project as a whole. For example, the growing number of ARM-based Linux <a href="https://www.omgubuntu.co.uk/2019/11/pinephone-specs-price-release-date">phones</a> and <a href="https://www.cnx-software.com/2019/07/25/buy-pinebook-pro-arm-linux-laptop/">computers</a> could see improved performance and battery life.</p>
      <p>The first stage of this process is merging as many of Android's modifications as possible back into the mainline Linux kernel. As of Feburary 2018, the Android common kernel (which OEMs make additional changes to) has over 32,000 insertions and over 1,500 deletions compared to mainline Linux 4.14.0. That's an improvement from a few years ago, when Android added over 60,000 lines of code on top of Linux.</p>
      <figure>
        <img src="https://www.androidpolice.com/wp-content/uploads/2019/11/kernel_lts_diff.png"/>
      </figure>
      <p>To show off how much progress has been made, Tom Gall, the director of the Linaro Consumer Group, brought a Xiaomi Pocophone on stage that was running Android 10 on top of a mainline Linux kernel. He told the audience, "there are major, major props to be given to the Google Kernel Team in particular for getting their code upstream so that we can boot devices with a mainline kernel." It's likely that some of the phone's features were non-functional (the battery percentage in the picture reads as 0%), but it's still impressive.</p>
      <figure>
        <img src="https://www.androidpolice.com/wp-content/uploads/2019/11/Linux_Kernel_Functional_Testing_LKFT.pdf_-_Google_-2.jpg"/>
        <figcaption>Xiaomi Pocophone booting Android 10 on top of a mainline Linux kernel</figcaption>
      </figure>
      <p>The Android kernel still receives modifications from chip makers (like Qualcomm and MediaTek) and per-device tweaks from OEMs (like Samsung and LG). Google improved this process in 2017 with <a href="https://www.androidpolice.com/2017/05/12/googles-project-treble-will-modularize-android-make-updates-faster/">Project Treble</a>, which separates device-specific drivers from the rest of Android. The company wants to bring this technology to the mainline Linux kernel, which could potentially eliminate the need for per-device kernels, and further speed up Android updates.</p>
      <p>The idea proposed by Google engineers is to build an interface in the Linux kernel that would allow proprietary device drivers to run as plug-in modules, so no modifications to the kernel itself are needed. In simple terms, it would bring the modularity of Project Treble to regular Linux.</p>
      <figure>
        <img src="https://www.androidpolice.com/wp-content/uploads/2019/11/ABI_Monitoring.pdf_-_Google_Chrome-980x537.png"/>
      </figure>
      <p>Of course, this is a massive undertaking that isn't guaranteed to succeed. Google would have to get its Android hardware partners on board, and as Ron Amadeo from Ars Technica pointed out, some of the Linux community is against the idea of a stable kernel interface. Greg Kroah-Hartman, a major developer for Linux, has already written <a href="https://www.kernel.org/doc/Documentation/process/stable-api-nonsense.rst">this</a> in documentation files:</p>
      <blockquote>Linux kernel development is continuous and at a rapid pace, never stopping to slow down. As such, the kernel developers find bugs in current interfaces, or figure out a better way to do things. [...] This is in stark contrast to a number of closed source operating systems which have had to maintain their older USB interfaces over time. This provides the ability for new developers to accidentally use the old interfaces and do things in improper ways, causing the stability of the operating system to suffer. [Also,] if the internal interfaces were not allowed to change, fixing [a] security problem and insuring that it could not happen again would not be possible.</blockquote>
      <p>Switching Android to a vanilla Linux kernel and integrating a Project Treble-like system in the mainline kernel is a massive endeavor, and it may never even come to fruition. Meanwhile, Google is still working on its new <a href="https://www.androidpolice.com/2019/06/29/official-fuchsia-developer-site-goes-live/">Fuchsia operating system</a> that may one day replace Android, with a custom kernel that does away with many of the technical hurdles involved with Linux.</p>
      <p>
        <b>Source: <br/></b>
        <a href="https://arstechnica.com/gadgets/2019/11/google-outlines-plans-for-mainline-linux-kernel-support-in-android/">Ars Technica</a>
      </p>
    </article>
  </body>
</html>