<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8"/>
    <meta property="og:url" content="https://www.cnews.cz/google-android-linux-mainline-moduly"/>
    <meta property="og:site_name" content="Cnews.cz"/>
    <meta property="article:published_time" content="2019-11-20T11:40:00+00:00"/>
    <meta property="og:title" content="Google chystá zásadní změnu, která pomůže v aktualizacích Androidu"/>
    <meta property="og:description" content="Google našel další způsob, jak snížit fragmentaci své mobilní platformy a jak uspíšit aktualizace mobilů a dalších zařízení s Androidem."/>
  </head>
  <body>
    <article>
      <h1>Google chystá zásadní změnu, která pomůže v aktualizacích Androidu</h1>
      <h2>Google našel další způsob, jak snížit fragmentaci své mobilní platformy a jak uspíšit aktualizace mobilů a dalších zařízení s Androidem.</h2>
      <address><time datetime="2019-11-20T11:40:00+00:00">20 Nov 2019, 11:40</time> by <a rel="author" href="https://www.cnews.cz/lide/vaclavik/" target="_blank">Lukáš Václavík</a></address>
      <p><a href="https://www.cnews.cz/google-project-treble-android-p">Projekt Treble</a> implementovaný v Androidu 8 a novějších byl důležitým krokem ke snížení fragmentace celé platformy. Google totiž oddělil „firmware“ (kernel, ovladače a různá rozhraní) a vrstvu, kde se nachází další části systému a aplikace. Obě části mohou vznikat nezávisle na sobě a výrobcům mobilů zjednodušují práci při vydávání aktualizací či upgradů, protože ta druhá část může ve velké míře být společná pro více zařízení současně. Nedávno Google řekl, že díky Treblu se Android 9 rozšířil <a href="https://www.cnews.cz/android-8-9-10-rychlost-rozsireni">dvakrát rychleji než předchůdce</a>.</p>
      <p>Ani to ale nestačí a v Googlu již přemýšlejí, jak rozdělit i onu první část. Ta totiž zůstává největší překážkou ve vývoji a distribuci Androidu. Systém běží na upraveném linuxovém jádru, ale po vydání stabilního kernelu následují tři neoddělitelné kroky.</p>
      <h3>Dlouhá cesta Linuxu do našich kapes</h3>
      <p>Jádro systému nejprve upraví Google, čímž z <i>Linux kernelu</i> vznikne <i>Android common kernel</i>. Mobily, tablety, televizory, hodinky apod. nepotřebují všechny součásti standardního Linuxu (jen by zabíraly místo), naopak potřebují různé úpravy nebo doplňky. Google uvádí, že aktuální Android kernel 4.14 má oproti Linuxu přes 300 změn v kódu, 32 000 přídavků a naopak 1500 odstranění.</p>
      <p>Hotový Android common kernel pak míří k výrobcům čipů jako Qualcomm, Mediatek, Samsung nebo HiSilicon (Huawei), kteří udělají vlastní úpravy, a vznikne <i>SoC kernel</i>. Ten už je specifický pro konkrétní čipset. Na něm pak výrobci mobilů vytvoří <i>Device kernel</i>, jenž obsahuje změny specifické pro jeden konkrétní telefon a jeho hardware (displej, foťáky, různé koprocesory atd.).</p>
      <p>Protože existují tisíce různých zařízení, vznikly také tisíce různých nekompatibilních Device kernelů. A protože jich je tolik, nikdo je nebude všechny aktualizovat, pokud „nehoří“. Během životního svého cyklu zařízení jen těžko dostanou aktualizaci, která by řešila něco jiného než opravdu závažný problém. Vydávání aktualizací založených na novějším Linux kernelu je prakticky vyloučené. Místo toho se stále prodlužuje podpora těch starých.</p>
      <h3>Jeden kernel vládne všem</h3>
      <p>Jak z toho ven, prozradil Google v září na Linux Plumbers Conference. Vývojář Matthias Männich přednášel o potenciálním <b>Androidu nové generace</b>, který by byl postaven na standardním Linux kernelu s několika zvlášť připojenými moduly specifickými pro Android. A tento základ nazvaný Generic Kernel Image (GKI) by měl stabilní rozhraní API/ABI, k němuž by se připojovaly kernel moduly s ovladači pro konkrétní hardware.</p>
      <figure>
        <img src="https://www.cnews.cz/wp-content/uploads/2019/11/android-next-generation-gki.png"/>
        <figcaption>Google mluví o Androidu nové generace</figcaption>
      </figure>
      <p>GKI by byl univerzální společný pro všechna zařízení a díky stabilitě rozhraní by se jádro dalo v budoucnu snadno záplatovat i bez zásahů výrobců čipů nebo koncových zařízení. Rozhraní totiž zůstane stejné v rámci jedné LTS (long-term support) větve Linuxu, Google konkrétně zmiňuje kernely 4.19.x a 5.x.y. Zatím ale nepracuje na tom, aby šlo i upgradovat na vyšší větev (tedy ze čtyřky na pětku).</p>
      <p><b>TIP:</b> <a href="https://www.cnews.cz/google-android-aktualizace-project-treble-mainline">Malá revoluce, Android ve vašem mobilu bude aktualizovat sám Google, ale…</a></p>
      <p>Návrh se možná nebude líbit komunitě, ale výrobcům ano. Díky modulárnímu konceptu nejspíš nebudou nuceni vydávat zdrojové kódy ovladačů. Místo toho pro GKI vydají binární moduly. Vývoj každopádně bude jednodušší, protože by nezávisle na sobě vznikaly GKI i jednotlivé moduly. Objeví-li se díry u síťového modemu, opraví se jenom on a na zbytek se nesahá. Bude-li chtít výrobce připravit dva různé mobily lišící se v drobnostech, akorát vymění potřebné ovladače. Příkladem budiž <a href="https://www.cnews.cz/xiaomi-mi-9t-pro-parametry-cena">Xiaomi Mi 9T a 9T Pro</a>, které běží na jiném čipsetu, ale zbytek hardwaru je totožný.</p>
      <p>Android se tak přiblíží běžným linuxovým distribucím, které také mohou mít společné jádro a zvláštní externí nesvobodné ovladače (typicky pro grafické a síťové čipy). Jeden systém přitom může fungovat na různých konfiguracích počítačů.</p>
      <p>Zavedení GKI bude během na dlouhou trať, protože Google musí nejdříve najít společnou řeč s výrobci i ostatními přispěvateli do Linuxu. A protože si tak velké změny zpravidla žádají novou verzi systému, je nepravděpodobné, že bude součástí vydání Androidu R/11 v létě příštího roku, na to nebude čas. Konkrétní data nicméně Google neprozradil.</p>
      <p>Více se tématu věnuje <a href="https://lwn.net/Articles/800452/">Jake Edge na LWN.net</a>. Přednášku Googlu pak najdete <a href="https://www.youtube.com/watch?v=f2C-gA8jEyY">na YouTubu</a> a konkrétní prezentaci pak v PDF <a href="https://linuxplumbersconf.org/event/4/contributions/403/attachments/319/543/ABI_Monitoring.pdf">na webu konference Linux Plumbers</a>.</p>
      <p>via <a href="https://arstechnica.com/gadgets/2019/11/google-outlines-plans-for-mainline-linux-kernel-support-in-android#cn3w5">Ars Technica</a></p>
      <related>
        <h4>SOUVISEJÍCÍ ČLÁNKY</h4>
        <a href="https://www.cnews.cz/half-life-alyx-prvni-informace-trailer-video"/>
        <a href="https://www.cnews.cz/intel-odstranuje-downloady-biosy-pro-sve-zakladni-desky-stary-hardware/"/>
        <a href="https://www.cnews.cz/intel-7nm-gpu-ponte-vecchio-architektura-xe-hpc-aurora-odhaleni"/>
        <a href="https://www.cnews.cz/apple-smart-battery-case-iphone-11"/>
        <a href="https://www.cnews.cz/nejlepsi-knihy-geeky-vanoce-2019"/>
      </related>
    </article>
  </body>
</html>