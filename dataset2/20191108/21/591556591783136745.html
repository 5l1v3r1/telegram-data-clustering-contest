<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8"/>
    <meta property="og:url" content="https://www.zdnet.com/article/apple-mail-on-macos-leaves-parts-of-encrypted-emails-in-plaintext/"/>
    <meta property="og:site_name" content="ZDNet"/>
    <meta property="article:published_time" content="2019-11-08T21:37:00+00:00"/>
    <meta property="og:title" content="Apple Mail on macOS leaves parts of encrypted emails in plaintext"/>
    <meta property="og:description" content="Apple has known since July, but a fix is still not available."/>
  </head>
  <body>
    <article>
      <h1>Apple Mail on macOS leaves parts of encrypted emails in plaintext</h1>
      <address><time datetime="2019-11-08T21:37:00+00:00">08 Nov 2019, 21:37</time> by <a rel="author" href="https://www.zdnet.com/meet-the-team/us/catalin.cimpanu/" target="_blank">Catalin Cimpanu</a></address>
      <p>
        <b>Apple has known since July, but a fix is still not available.</b>
      </p>
      <figure>
        <img src="https://zdnet2.cbsistatic.com/hub/i/2019/11/08/6d8e91d2-d1ef-4fe8-b00f-55ad3055ceef/3487ac06d1f719a1567fb15f16ab7396/apple-mail-encrypted-issue.jpg"/>
        <figcaption>Image: Bob Gendler</figcaption>
      </figure>
      <p>The Apple Mail app on macOS stores encrypted emails in plaintext inside a database called snippets.db.<br/><br/>The issue was discovered earlier this year by an Apple IT specialist named Bob Gendler.<br/><br/>The issue is not fixed at the time of writing, although Gendler told the company about it back in July. A fix is coming, according to tech news site <a href="https://www.theverge.com/2019/11/8/20954130/apple-mail-encrypted-unencrypted-email-macos-siri-text">The Verge</a>; however, Apple did not provide a timeline.</p>
      <h3>Apple Mail + Siri = bad</h3>
      <p>The bug occurs because of a Siri feature that allows Apple's voice assistant to provide information for contacts, following an owner's request.<br/><br/>According to Gendler, Siri uses a process called "suggestd" to scrape various apps for contact information. Whatever it finds, it stores inside the snippets.db file, where it keeps the data on hand, in case the user ever wants a contact suggestion.</p>
      <p>Over the summer, Gendler discovered that if users had configured Apple Mail to send and receive encrypted email, Siri would collect a plaintext version of the user's emails, and store them inside this database.<br/><br/>"This is a big deal. This is a big deal for governments, corporations and regular people who use encrypted email and expect the contents to be protected," <a href="https://medium.com/@boberito/apple-mail-stores-encrypted-emails-in-plain-text-database-fix-included-3c2369ce26d4">Gendler said in a blog post</a> published this week.</p>
      <p>"Secret or top-secret information, which was sent encrypted, would be exposed via this process and database, as would trade secrets and proprietary data," he said.</p>
      <h3>How to prevent Siri from scraping your emails</h3>
      <p>Gendler says the issue was present on all macOS versions from Sierra to the latest Catalina.<br/><br/>The Mac IT expert says that disabling Siri doesn't do anything, as the "suggestd" process keeps scraping emails to have them ready the next time Siri was enabled.<br/><br/>The only way to prevent Siri from scraping encrypted emails is to specifically tell it not to read content from Apple Mail.<br/><br/>"There are 3 ways to disable these processes from learning from Apple Mail," Gendler said. They are:<br/><br/><b>1)</b> Go to <b>System Preferences</b> → <b>Siri </b>→ <b>Siri Suggestions &amp; Privacy</b>, and then uncheck the box for Apple Mail.<br/><br/><b>2)</b> Run from the Mac Terminal the following command (as a normal user, no admin access needed):<br/><br/><i>defaults write com.apple.suggestions SiriCanLearnFromAppBlacklist -array com.apple.mail</i><br/><br/><b>3)</b> Deploy a System-Level (for all users) <a href="https://github.com/boberito/ConfigurationProfiles/blob/master/suggestd.mobileconfig">configuration profile</a> to turn off Siri from learning from Apple Mail.<br/><br/>Gendler said the third option is permanent, as a future OS update won't accidentally re-enable Siri's email scraping.<br/><br/>A final step, Gendler said, is to remove the snippets.db file. Telling Siri to stop scraping Apple Mail content doesn't automatically delete this file, so users will need to do it themselves. The file is located in "/Users/(username)/Library/Suggestions/".</p>
    </article>
  </body>
</html>