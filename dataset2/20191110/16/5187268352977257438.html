<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8"/>
    <meta property="og:url" content="https://pplware.sapo.pt/linux/dig-descubra-o-que-se-esconde-dentro-de-um-servidor-de-dns/"/>
    <meta property="og:site_name" content="Pplware"/>
    <meta property="article:published_time" content="2019-11-10T16:41:02+00:00"/>
    <meta property="og:title" content="Dig: Descubra o que se “esconde” dentro de um servidor de DNS"/>
    <meta property="og:description" content="Um dos serviços mais importantes em qualquer rede é o DNS (Domain Name System). Este serviço é responsável pela tradução de nomes em endereços de IP e vice-versa e funciona à base de pedidos e respostas"/>
  </head>
  <body>
    <article>
      <h1>Dig: Descubra o que se “esconde” dentro de um servidor de DNS</h1>
      <address><time datetime="2019-11-10T16:41:02+00:00">10 Nov 2019, 16:41</time> by <a rel="author">Pedro Pinto</a></address>
      <p>O DNS é o coração de uma rede de dados. Sem DNS as máquinas teriam de usar unicamente endereços IPs e os utilizadores teriam de usar números em vez de nomes.</p>
      <p>A configuração de um servidor de DNS tem várias componentes. Saiba como pode descobrir algumas das configurações.</p>
      <figure>
        <img src="https://pplware.sapo.pt/wp-content/uploads/2019/11/dig_capa.jpg"/>
      </figure>
      <h3>Para que serve o DNS?</h3>
      <p>Um dos serviços mais importantes em qualquer rede é o DNS (Domain Name System). Este serviço é responsável pela tradução de nomes em endereços de IP e vice-versa e funciona à base de pedidos e respostas, isto é, uma máquina faz um pedido para saber o IP associado a um determinado nome e o serviço envia-lhe essa informação.</p>
      <p>Por exemplo, quando acedemos ao site www.google.com, o nosso sistema precisa de saber qual o servidor a contactar e pede ao servidor de DNS (que está configurado) para que este lhe traduza o nome num endereço IP. Do lado do cliente o utilizador apenas tem de indicar qual o servidor de DNS a usar. Já do lado do servidor há um conjunto de parâmetros que temos de definir.</p>
      <p>
        <b>Resource Records utilizados em zonas DNS</b>
      </p>
      <p>Toda a informação associada a um domínio DNS é registada nos ficheiros de zonas através de <i>resource records</i>. Os resource records permitem definir um tipo de apontador para endereços IP, nomes, etc. Por exemplo, quando criar um registo no DNS relativo a um servidor de e-mail, usamos o resource records MX (Mail Exchanger)</p>
      <p>Tipos de resource records mais importantes:</p>
      <ul>
        <li><b>A</b>– Address: Associação de um nome a um endereço (mapeamento direto)</li>
        <li><b>AAAA</b>– Address IPv6; Associação de um nome a um endereço IPv6</li>
        <li><b>NS </b>(NameServer); Indica o nome de um servidor de DNS do domínio ou subdomínio;</li>
        <li><b>CNAME</b>– (Canonical NAME); um alias (nome alternativo) para um host;</li>
        <li><b>MX</b>– (Mail eXchanger); Definição de servidores de correio eletrónico do domínio ou subdomínio ;</li>
        <li><b>PTR</b>– (PoinTeR); Associação de um endereço a um nome (reverse DNS – mapeamento inverso)</li>
        <li><b>SOA</b>– (Start Of Authority); Identificação de cabeçalhos de zonas</li>
        <li><b>SRV</b>– (SeRVice); permite definir serviços disponíveis num domínio</li>
        <li><b>TXT –</b>Definição de informação textual sobre o domínio</li>
      </ul>
      <h3>Como usar a ferramenta dig para explorar o DNS?</h3>
      <p>A ferramenta dig (Domain Information Groper) pode ser usada para fazer consultas a um serviço de DNS. As opções que esta ferramenta oferece são várias, mas hoje vamos aprender as mais básicas.</p>
      <p>Para saberem informações sobre o serviço de DNS de um domínio usem o comando…</p>
      <p>
        <code>dig nmap.com</code>
      </p>
      <p>dig nmap.com</p>
      <figure>
        <img src="https://pplware.sapo.pt/wp-content/uploads/2019/11/dig_01.jpg"/>
      </figure>
      <p>Como se pode ver pelo output, foi devolvido o registo tipo A para o domino nmap.com. Para obter uma resposta mais curta usem o comando…</p>
      <p>
        <code>dig nmap.com +short</code>
      </p>
      <p>dig nmap.com +short</p>
      <figure>
        <img src="https://pplware.sapo.pt/wp-content/uploads/2019/11/dig_02.jpg"/>
      </figure>
      <p>Para consultarem todos os tipos de registo do DNS (Resource Records) podem usar a keyword ANY.</p>
      <p>
        <code>dig nmap.com ANY</code>
      </p>
      <p>dig nmap.com ANY</p>
      <figure>
        <img src="https://pplware.sapo.pt/wp-content/uploads/2019/11/dig_03.jpg"/>
      </figure>
      <p>Caso pretendam um tipo de registo específico basta que o incluam no comando. Por exemplo, registo MX.</p>
      <p>
        <code>dig nmap.com MX</code>
      </p>
      <p>dig nmap.com MX</p>
      <figure>
        <img src="https://pplware.sapo.pt/wp-content/uploads/2019/11/dig_04.jpg"/>
      </figure>
      <p>Como último exemplo vamos saber como obter o nome usando um endereço IP (reverse lookup). Para isso abram a linha de comandos e executem o comando:</p>
      <p>
        <code>dig +answer -x 172.217.166.46</code>
      </p>
      <p>dig +answer -x 172.217.166.46</p>
      <figure>
        <img src="https://pplware.sapo.pt/wp-content/uploads/2019/11/dig_05.jpg"/>
      </figure>
      <p>Assim, por hoje é tudo! A ferramenta dig tem um potencial enorme e pode ser uma enorme ajuda no troubleshooting. Se já conhecem esta ferramenta e usam-na, digam-nos que outras variações usam do comando.</p>
      <h3>Leia também…</h3>
      <related>
        <a href="https://pplware.sapo.pt/linux/configurar-um-servidor-de-dns/"/>
      </related>
    </article>
  </body>
</html>